---
// Unified Bento layout component with optional item rendering.
type Span = 1 | 2 | 3 | 4;

interface Item {
  colSpan?: Span;
  rowSpan?: Span;
  class?: string;
  content?: any;
}

interface Props {
  items?: Item[];
  class?: string;
}

const { items = [], class: className = '' }: Props = Astro.props;

const colSpanClass = (span: Span = 1) =>
  ({
    1: 'xl:col-span-1 sm:col-span-2 col-span-1',
    2: 'xl:col-span-2 sm:col-span-2 col-span-1',
    3: 'xl:col-span-3 sm:col-span-2 col-span-1',
    4: 'xl:col-span-4 sm:col-span-2 col-span-1',
  }[span]);

const rowSpanClass = (span: Span = 1) =>
  ({
    1: 'row-span-1',
    2: 'row-span-2',
    3: 'row-span-3',
    4: 'row-span-4',
  }[span]);
---
<div class:list={['grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4', className]}>
  {
    items.length
      ? items.map((item) => (
          <div
            class:list={[
              'bento-card h-full rounded-xl border p-6 shadow-sm transition duration-200',
              'bg-[var(--card-bg,rgba(255,255,255,0.6))] border-[var(--card-border,rgba(255,255,255,0.3))]',
              'backdrop-blur-lg',
              colSpanClass((item.colSpan as Span) ?? 1),
              rowSpanClass((item.rowSpan as Span) ?? 1),
              item.class,
            ]}
          >
            {item.content}
          </div>
        ))
      : <slot />
  }
</div>

<style>
  :global(.dark) .bento-card {
    background: rgba(30, 30, 30, 0.35);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow:
      0 4px 24px -1px rgba(0, 0, 0, 0.2),
      0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  }
</style>
